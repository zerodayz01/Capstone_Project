<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>College Discovery</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style8.css') }}">
</head>
<body>
    <header>
        <h2>College Discovery</h2>
    </header>
    <main>
        <div class="topnav">
            <a class="navbuttons" href="index.html">Home</a>
            <a class="navbuttons" href="load.html">Access Tools</a>
            <a class="navbuttons" href="resources.html">Resources</a>
            <a class="navbuttons" href="more.html">Learn More</a>
            <a class="navbuttons" href="about.html">About Us</a>
            <a class="navbuttons" href="contact.html">Contact Universities</a>
        </div>

        <h1 class="text-box">Search by University Name/State</h1>
        <div class="intro text-box" style="text-align: center;">

    <ul>
    <li>
        Locale is character of the college's surroundings, whether it's in an urban, suburban, or rural area. This
        influences the overall atmosphere and lifestyle on campus. City and State give about the specific location of
        the college. Understanding the city and state gives insights into the broader community, local opportunities,
        and the overall environment. Admissions Rate is percentage of applicants admitted to the college. A lower
        admissions rate suggests a more competitive selection process, which can be vital information for prospective
        students. Enrolled tells of all the individuals who are enrolled at the university at the given time.
    </li>
</ul>
</div>
<form action="/search" method="GET" class="search-form">
<div style="display: flex; align-items: center;">
    <input type="text" id="query" name="query" required style="width: 300px; padding: 10px; margin-right: 10px;">
    <button type="submit" style="background-color: #333; color: #fff; padding: 10px 20px; font-size: 16px; font-weight: bold; border: none; cursor: pointer; border-radius: 5px;">Search</button>
</div>
</form>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.querySelector('form');
            const resultsDiv = document.getElementById('results');

            form.addEventListener('submit', function (event) {
                event.preventDefault();

                const query = document.getElementById('query').value;

                fetch(`/search?query=${query}`)
                    .then(response => response.json())
                    .then(data => {
                        const results = data.results;
                        resultsDiv.innerHTML = '';

                        if (results.length > 0) {
                            const table = document.createElement('table');
                            table.innerHTML = "<tr><th>School ID</th><th>Name</th><th>City</th><th>State</th><th>Locale</th><th>Admissions Rate</th><th>Enrolled</th></tr>";

                            results.forEach(result => {
                                const row = table.insertRow(-1);
                                const cellId = row.insertCell(0);
                                const cellName = row.insertCell(1);
                                const cellCity = row.insertCell(2);
                                const cellState = row.insertCell(3);
                                const cellLoc = row.insertCell(4);
                                const cellAdminRate = row.insertCell(5);
                                const cellEnroll = row.insertCell(6);

                                cellId.innerHTML = result.id;
                                cellName.innerHTML = result.school.name || 'N/A';
                                cellCity.innerHTML = result.school.city || 'N/A';
                                cellState.innerHTML = result.school.state || 'N/A';

                                var locale = result.school.locale;
                                var displayText;

                                if (locale >= 11 && locale <= 13) {
                                    displayText = 'City';
                                } else if (locale >= 21 && locale <= 23) {
                                    displayText = 'Suburban';
                                } else if (locale >= 31 && locale <= 33) {
                                    displayText = 'Town';
                                } else if (locale >= 41 && locale <= 43) {
                                    displayText = 'Rural';
                                } else {
                                    displayText = 'N/A';
                                }

                                cellLoc.innerHTML = displayText;

                                const admissionRate = result.latest.admissions.admission_rate.overall;
                                const formattedAdmissionRate = admissionRate ? `${(admissionRate * 100).toFixed(1)}%` : 'N/A';
                                cellAdminRate.innerHTML = formattedAdmissionRate;

                                const enroll = result.latest.student.size;
                                const formattedEnroll = enroll ? enroll.toLocaleString() : 'N/A';
                                cellEnroll.innerHTML = formattedEnroll;
                            });

                            resultsDiv.appendChild(table);
                        } else {
                            resultsDiv.innerHTML = "<p>No results found.</p>";
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching data:', error);
                        resultsDiv.innerHTML = "<p>An error occurred while fetching data.</p>";
                    });
            });
        });
    </script>
<div id="results" class="styled-table"></div>

</main>

    <footer class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h2>Contact Us</h2>
            <p>Email: <a href="mailto:info.collegediscovery@gmail.com">info.collegediscovery@gmail.com</a></p>
            <p>Fax: 1(800)-456-789</p>
            <p>Phone: 1(800)-456-789</p>
        </div>
        <div class="footer-section">
        <h2>Alternative Options</h2>
        <p><a href="https://www.forbes.com/advisor/education/trade-schools/guide-to-trade-school-vocational-programs/" target="_blank">Trade/Vocational School</a></p>
        <p><a href="https://www.mass.gov/info-details/authorized-real-estate-schools" target="_blank">Authorized Real Estate Schools</a></p>
        <p><a href="https://www.understood.org/en/articles/after-high-school-different-paths-to-success" target="_blank">Different Paths to Success</a></p>
        </div>
        <div class="footer-section">
            <h2>Quick Links</h2>
            <p><a href="index.html">Home</a></p>
            <p><a href="load.html">Access Tools</a></p>
            <p><a href="resources.html">Resources</a></p>
        </div>
    </div>
    <div class="copyright">
        &copy; 2023 College Discovery. All rights reserved.
    </div>
</footer>
</body>
</html>
