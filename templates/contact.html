<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>College Discovery</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style4.css') }}">
</head>
<body>
    <header>
        <h2>College Discovery</h2>
    </header>
    <main>
        <div class="topnav">
            <a class="navbuttons" href="index.html">Home</a>
            <a class="navbuttons" href="load.html">Access Tools</a>
            <a class="navbuttons" href="resources.html">Resources</a>
            <a class="navbuttons" href="more.html">Learn More</a>
            <a class="navbuttons" href="about.html">About Us</a>
            <a class="navbuttons" href="contact.html">Contact Universities</a>
        </div>
        <h1 class="text-box">Getting in Touch</h1>

        <div class="intro text-box" style="text-align: left;">
            <p>Contacting a college is a great way to find answers to your questions and learn more about what they offer. Whether you have inquiries about programs, admission, financial aid, or any other aspect of college life, reaching out to the school can provide valuable information to help you make informed decisions. Using the univeristy website and price calculator you will be able to dive deeper into you stidues.</p>
        </div>
        </div>
<form action="/search" method="GET" class="search-form">
<div style="display: flex; align-items: center;">
    <input type="text" id="query" name="query" required style="width: 300px; padding: 10px; margin-right: 10px;">
    <button type="submit" style="background-color: #333; color: #fff; padding: 10px 20px; font-size: 16px; font-weight: bold; border: none; cursor: pointer; border-radius: 5px;">Search</button>
</div>
</form>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector('form');
    const resultsDiv = document.getElementById('results');

    form.addEventListener('submit', function (event) {
        event.preventDefault();

        const query = document.getElementById('query').value;

        fetch(`/search?query=${query}`)
            .then(response => response.json())
            .then(data => {
                const results = data.results;
                resultsDiv.innerHTML = '';

                if (results.length > 0) {
                    const table = document.createElement('table');
                    table.innerHTML = "<tr><th>School Name</th><th>City</th><th>State</th><th>Website</th><th>Price Calculator</th></tr>";

                    results.forEach(result => {
                        const row = table.insertRow(-1);
                        const cellName = row.insertCell(0);
                        const cellCity = row.insertCell(1);
                        const cellState = row.insertCell(2);
                        const cellWeb = row.insertCell(3);
                        const cellPrice = row.insertCell(4);

                        cellName.innerHTML = result.school.name === null ? 'N/A' : result.school.name;
                        cellCity.innerHTML = result.school.city === null ? 'N/A' : result.school.city;
                        cellState.innerHTML = result.school.state === null ? 'N/A' : result.school.state;

                        const decodedWebsiteUrl = decodeURIComponent(result.school.school_url);
                        if (isValidUrl(decodedWebsiteUrl)) {
                            cellWeb.innerHTML = `<a href="${decodedWebsiteUrl}" target="_blank">${decodedWebsiteUrl}</a>`;
                        } else {
                            cellWeb.innerHTML = result.school.school_url === null ? 'N/A' : `Paste this: ${decodedWebsiteUrl}`;
                        }

                        const decodedPriceCalculatorUrl = decodeURIComponent(result.school.price_calculator_url);
                        if (isValidUrl(decodedPriceCalculatorUrl)) {
                            cellPrice.innerHTML = `<a href="${decodedPriceCalculatorUrl}" target="_blank">${decodedPriceCalculatorUrl}</a>`;
                        } else {
                            cellPrice.innerHTML = result.school.price_calculator_url === null ? 'N/A' : `Paste this: ${decodedPriceCalculatorUrl}`;
                        }
                    });

                    resultsDiv.appendChild(table);
                } else {
                    resultsDiv.innerHTML = "<p>No results found.</p>";
                }
            })
            .catch(error => {
                console.error('Error fetching data:', error);
                resultsDiv.innerHTML = "<p>An error occurred while fetching data.</p>";
            });
    });

    const isValidUrl = (url) => {
        try {
            new URL(url);
            return true;
        } catch (error) {
            return false;
        }
    };
});
</script>

<div id="results" class="styled-table"></div>

    </main>

    <footer class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h2>Contact Us</h2>
            <p>Email: <a href="mailto:info.collegediscovery@gmail.com">info.collegediscovery@gmail.com</a></p>
            <p>Fax: 1(800)-456-789</p>
            <p>Phone: 1(800)-456-789</p>
        </div>
        <div class="footer-section">
        <h2>Alternative Options</h2>
        <p><a href="https://www.forbes.com/advisor/education/trade-schools/guide-to-trade-school-vocational-programs/" target="_blank">Trade/Vocational School</a></p>
        <p><a href="https://www.mass.gov/info-details/authorized-real-estate-schools" target="_blank">Authorized Real Estate Schools</a></p>
        <p><a href="https://www.understood.org/en/articles/after-high-school-different-paths-to-success" target="_blank">Different Paths to Success</a></p>
        </div>
        <div class="footer-section">
            <h2>Quick Links</h2>
            <p><a href="index.html">Home</a></p>
            <p><a href="load.html">Access Tools</a></p>
            <p><a href="resources.html">Resources</a></p>
        </div>
    </div>
    <div class="copyright">
        &copy; 2023 College Discovery. All rights reserved.
    </div>
</footer>
</body>
</html>
